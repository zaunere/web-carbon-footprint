javascript:javascript%3A(function()%7B%0D const pageAnalyzer %3D %7B%0D init%3A function() %7B%0D this.analyze()%3B%0D %7D%2C%0D getJavaScript%3A async function() %7B%0D const scripts %3D document.getElementsByTagName('script')%3B%0D let totalSize %3D 0%3B%0D for(let script of scripts) %7B%0D if(script.src) %7B%0D try %7B%0D const response %3D await fetch(script.src)%3B%0D const text %3D await response.text()%3B%0D totalSize %2B%3D new Blob(%5Btext%5D).size%3B%0D %7D catch(e) %7B%0D console.warn('Could not fetch%3A'%2C script.src)%3B%0D %7D%0D %7D else %7B%0D totalSize %2B%3D new Blob(%5Bscript.innerHTML%5D).size%3B%0D %7D%0D %7D%0D return totalSize%3B%0D %7D%2C%0D getCSS%3A async function() %7B%0D const links %3D document.getElementsByTagName('link')%3B%0D const styles %3D document.getElementsByTagName('style')%3B%0D let totalSize %3D 0%3B%0D for(let link of links) %7B%0D if(link.rel %3D%3D%3D 'stylesheet') %7B%0D try %7B%0D const response %3D await fetch(link.href)%3B%0D const text %3D await response.text()%3B%0D totalSize %2B%3D new Blob(%5Btext%5D).size%3B%0D %7D catch(e) %7B%0D console.warn('Could not fetch%3A'%2C link.href)%3B%0D %7D%0D %7D%0D %7D%0D for(let style of styles) %7B%0D totalSize %2B%3D new Blob(%5Bstyle.innerHTML%5D).size%3B%0D %7D%0D totalSize %2B%3D new Blob(%5Bdocument.documentElement.outerHTML%5D).size%3B%0D return totalSize%3B%0D %7D%2C%0D getReadableText%3A function() %7B%0D const walker %3D document.createTreeWalker(%0D document.body%2C%0D NodeFilter.SHOW_TEXT%2C%0D %7B%0D acceptNode%3A function(node) %7B%0D if(node.parentElement.tagName %3D%3D%3D 'SCRIPT' %7C%7C %0D node.parentElement.tagName %3D%3D%3D 'STYLE') %7B%0D return NodeFilter.FILTER_REJECT%3B%0D %7D%0D return node.textContent.trim() %3F %0D NodeFilter.FILTER_ACCEPT %3A %0D NodeFilter.FILTER_REJECT%3B%0D %7D%0D %7D%0D )%3B%0D let text %3D ''%3B%0D while(walker.nextNode()) %7B%0D text %2B%3D walker.currentNode.textContent.trim() %2B ' '%3B%0D %7D%0D return new Blob(%5Btext%5D).size%3B%0D %7D%2C%0D calculatePercentages%3A function(js%2C css%2C text) %7B%0D const total %3D js %2B css %2B text%3B%0D return %7B%0D javascript%3A %7B%0D raw%3A Math.round(js %2F 1024)%2C%0D percent%3A Math.round((js %2F total) * 1000) %2F 10%0D %7D%2C%0D cssHtml%3A %7B%0D raw%3A Math.round(css %2F 1024)%2C%0D percent%3A Math.round((css %2F total) * 1000) %2F 10%0D %7D%2C%0D readableText%3A %7B%0D raw%3A Math.round(text %2F 1024)%2C%0D percent%3A Math.round((text %2F total) * 1000) %2F 10%0D %7D%2C%0D url%3A window.location.href%2C%0D timestamp%3A new Date().toISOString()%0D %7D%3B%0D %7D%2C%0D showCopiedNotice%3A function() %7B%0D const notice %3D document.createElement('div')%3B%0D notice.style.cssText %3D %60%0D position%3A fixed%3B%0D top%3A 20px%3B%0D right%3A 20px%3B%0D background%3A %234a90e2%3B%0D color%3A white%3B%0D padding%3A 10px 20px%3B%0D border-radius%3A 4px%3B%0D font-family%3A monospace%3B%0D z-index%3A 2147483648%3B%0D opacity%3A 0%3B%0D transition%3A opacity 0.3s ease-in-out%3B%0D %60%3B%0D notice.textContent %3D 'JSON copied to clipboard! üìã'%3B%0D document.body.appendChild(notice)%3B%0D %2F%2F Fade in%0D setTimeout(() %3D> notice.style.opacity %3D '1'%2C 0)%3B%0D %2F%2F Fade out and remove%0D setTimeout(() %3D> %7B%0D notice.style.opacity %3D '0'%3B%0D setTimeout(() %3D> document.body.removeChild(notice)%2C 300)%3B%0D %7D%2C 1000)%3B%0D %7D%2C%0D createVisualization%3A function(results) %7B%0D const container %3D document.createElement('div')%3B%0D container.style.cssText %3D %60%0D position%3A fixed%3B%0D top%3A 20px%3B%0D right%3A 20px%3B%0D background%3A rgba(0%2C0%2C0%2C0.9)%3B%0D color%3A white%3B%0D padding%3A 20px%3B%0D border-radius%3A 8px%3B%0D font-family%3A monospace%3B%0D z-index%3A 2147483647%3B%0D width%3A 300px%3B%0D box-shadow%3A 0 0 20px rgba(0%2C0%2C0%2C0.5)%3B%0D %60%3B%0D const totalKB %3D results.javascript.raw %2B results.cssHtml.raw %2B results.readableText.raw%3B%0D container.innerHTML %3D %60%0D <div style%3D"font-size%3A 16px%3B margin-bottom%3A 15px%3B text-align%3A center%3B">%0D Page Weight%3A %24%7BtotalKB%7DKB%0D <span style%3D"font-size%3A 12px%3B opacity%3A 0.7">%0D %24%7BtotalKB > 2000 %3F 'üò∞ Heavy' %3A totalKB > 1000 %3F 'üòê Medium' %3A 'üòä Light'%7D%0D <%2Fspan>%0D <%2Fdiv>%0D <div style%3D"margin-bottom%3A 20px%3B">%0D <div style%3D"margin-bottom%3A 10px%3B">%0D <div style%3D"display%3A flex%3B justify-content%3A space-between%3B margin-bottom%3A 4px%3B">%0D <span>JavaScript<%2Fspan>%0D <span>%24%7Bresults.javascript.raw%7DKB (%24%7Bresults.javascript.percent%7D%25)<%2Fspan>%0D <%2Fdiv>%0D <div style%3D"width%3A 100%25%3B height%3A 20px%3B background%3A %231a1a1a%3B border-radius%3A 10px%3B overflow%3A hidden%3B">%0D <div style%3D"width%3A %24%7Bresults.javascript.percent%7D%25%3B height%3A 100%25%3B background%3A %234a90e2%3B transition%3A width 1s ease-out%3B"><%2Fdiv>%0D <%2Fdiv>%0D <%2Fdiv>%0D <div style%3D"margin-bottom%3A 10px%3B">%0D <div style%3D"display%3A flex%3B justify-content%3A space-between%3B margin-bottom%3A 4px%3B">%0D <span>CSS%2FHTML<%2Fspan>%0D <span>%24%7Bresults.cssHtml.raw%7DKB (%24%7Bresults.cssHtml.percent%7D%25)<%2Fspan>%0D <%2Fdiv>%0D <div style%3D"width%3A 100%25%3B height%3A 20px%3B background%3A %231a1a1a%3B border-radius%3A 10px%3B overflow%3A hidden%3B">%0D <div style%3D"width%3A %24%7Bresults.cssHtml.percent%7D%25%3B height%3A 100%25%3B background%3A %2350c878%3B transition%3A width 1s ease-out%3B"><%2Fdiv>%0D <%2Fdiv>%0D <%2Fdiv>%0D <div>%0D <div style%3D"display%3A flex%3B justify-content%3A space-between%3B margin-bottom%3A 4px%3B">%0D <span>Content<%2Fspan>%0D <span>%24%7Bresults.readableText.raw%7DKB (%24%7Bresults.readableText.percent%7D%25)<%2Fspan>%0D <%2Fdiv>%0D <div style%3D"width%3A 100%25%3B height%3A 20px%3B background%3A %231a1a1a%3B border-radius%3A 10px%3B overflow%3A hidden%3B">%0D <div style%3D"width%3A %24%7Bresults.readableText.percent%7D%25%3B height%3A 100%25%3B background%3A %23ff6b6b%3B transition%3A width 1s ease-out%3B"><%2Fdiv>%0D <%2Fdiv>%0D <%2Fdiv>%0D <%2Fdiv>%0D <div style%3D"text-align%3A center%3B font-size%3A 32px%3B margin-top%3A 15px%3B">%0D %24%7BArray(Math.ceil(totalKB%2F500)).fill('üèã%EF%B8%8F').join('')%7D%0D <%2Fdiv>%0D <button id%3D"copyJsonBtn" style%3D"%0D width%3A 100%25%3B%0D margin-top%3A 15px%3B%0D padding%3A 8px%3B%0D background%3A %234a90e2%3B%0D border%3A none%3B%0D border-radius%3A 4px%3B%0D color%3A white%3B%0D cursor%3A pointer%3B%0D font-family%3A monospace%3B%0D transition%3A background 0.3s%3B%0D ">Copy JSON Data<%2Fbutton>%0D <div style%3D"font-size%3A 10px%3B margin-top%3A 10px%3B text-align%3A center%3B opacity%3A 0.7%3B">%0D Click anywhere outside buttons to close%0D <%2Fdiv>%0D %60%3B%0D %2F%2F Handle copy button click%0D const copyBtn %3D container.querySelector('%23copyJsonBtn')%3B%0D copyBtn.onclick %3D (e) %3D> %7B%0D e.stopPropagation()%3B%0D navigator.clipboard.writeText(JSON.stringify(results%2C null%2C 2))%0D .then(() %3D> this.showCopiedNotice())%0D .catch(err %3D> console.error('Failed to copy%3A'%2C err))%3B%0D %7D%3B%0D %2F%2F Click outside buttons to close%0D container.onclick %3D function(e) %7B%0D if(e.target %3D%3D%3D container %7C%7C e.target.tagName !%3D%3D 'BUTTON') %7B%0D document.body.removeChild(container)%3B%0D %7D%0D %7D%3B%0D document.body.appendChild(container)%3B%0D %7D%2C%0D analyze%3A async function() %7B%0D try %7B%0D const jsSize %3D await this.getJavaScript()%3B%0D const cssSize %3D await this.getCSS()%3B%0D const textSize %3D this.getReadableText()%3B%0D const results %3D this.calculatePercentages(jsSize%2C cssSize%2C textSize)%3B%0D this.createVisualization(results)%3B%0D %7D catch(e) %7B%0D console.error('Analysis failed%3A'%2C e)%3B%0D %7D%0D %7D%0D %7D%3B%0D pageAnalyzer.init()%3B%0D%7D)()%3B
